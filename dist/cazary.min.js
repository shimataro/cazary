"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! Cazary (jQuery 1.7+) - JavaScript WYSIWYG editor (https://github.com/shimataro/cazary) */
!function(e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e(require("jquery"),window):e(jQuery,window)}(function(e,t,r){var a=t.document,n=function(){function e(){var e=a().toLowerCase(),t=n[e];return t!==r?t:(e=e.split("-")[0],t=n[e],t!==r?t:{})}function a(){try{var e=t.navigator;return e.browserLanguage||e.language||e.userLanguage}catch(e){return r}}var n={ja:{Font:"フォント",Size:"サイズ",Bold:"太字",Italic:"斜体",Underline:"下線","Strike-Through":"打ち消し線","Remove Format":"書式をクリア","Foreground Color":"文字色","Background Color":"背景色",Superscript:"上付き文字",Subscript:"下付き文字","Justify Left":"左揃え","Justify Center":"中央揃え","Justify Right":"右揃え","Justify Full":"両端揃え",Indent:"字下げ",Outdent:"字下げ解除","Ordered List":"番号付きリスト","Unordered List":"箇条書き","Horizontal Rule":"横線","Insert Image":"画像挿入","Insert Link":"リンク挿入",Undo:"元に戻す",Redo:"やり直し","Show Source":"HTMLソース表示","Size 1":"サイズ1","Size 2":"サイズ2","Size 3":"サイズ3","Size 4":"サイズ4","Size 5":"サイズ5","Size 6":"サイズ6","Size 7":"サイズ7","Input image URL":"画像URLを入力してください","Input link URL or E-mail address":"リンク先URLまたはメールアドレスを入力してください",Preview:"プレビュー",Insert:"挿入",Unlink:"リンク解除"},pl:{Font:"Czcionka",Size:"Rozmiar",Bold:"Pogrubienie",Italic:"Kursywa",Underline:"Podkreślenie","Strike-Through":"Przekreślenie","Remove Format":"Usuń formatowanie","Foreground Color":"Kolor czcionki","Background Color":"Kolor tła",Superscript:"Indeks górny",Subscript:"Indeks dolny","Justify Left":"Wyrównanie do lewej","Justify Center":"Wyrównaj do środka","Justify Right":"Wyrównaj do prawej","Justify Full":"Wyjustowanie",Indent:"Zwiększ wcięcie",Outdent:"Zmniejsz wcięcie","Ordered List":"Numerowanie","Unordered List":"Punktory","Horizontal Rule":"Pozioma linia","Insert Image":"Wstaw obrazek","Insert Link":"Wstaw link",Undo:"Cofnij",Redo:"Powtórz","Show Source":"Pokaż źródło","Size 1":"Rozmiar 1","Size 2":"Rozmiar 2","Size 3":"Rozmiar 3","Size 4":"Rozmiar 4","Size 5":"Rozmiar 5","Size 6":"Rozmiar 6","Size 7":"Rozmiar 7","Input image URL":"Adres obrazka","Input link URL or E-mail address":"Wprowadź adres URL lub E-mail",Preview:"Podgląd",Insert:"Wstaw",Unlink:"Usuń link"},"pt-br":{Font:"Fonte",Size:"Tamanho",Bold:"Negrito",Italic:"Itálico",Underline:"Sublinhado","Strike-Through":"Tachado","Remove Format":"Remover formatação","Foreground Color":"Cor da fonte","Background Color":"Sombreamento",Superscript:"Sobrescrito",Subscript:"Subscrito","Justify Left":"Alinhar à esquerda","Justify Center":"Centralizar","Justify Right":"Alinhar à direita","Justify Full":"Justificar",Indent:"Aumentar recuo",Outdent:"Diminuir recuo","Ordered List":"Numeração","Unordered List":"Marcadores","Horizontal Rule":"Linha horizontal","Insert Image":"Inserir imagem","Insert Link":"Inserir hiperlink",Undo:"Desfazer",Redo:"Refazer","Show Source":"Mostrar fonte","Size 1":"Tamanho 1","Size 2":"Tamanho 2","Size 3":"Tamanho 3","Size 4":"Tamanho 4","Size 5":"Tamanho 5","Size 6":"Tamanho 6","Size 7":"Tamanho 7","Input image URL":"Insira a URL da imagem","Input link URL or E-mail address":"Insira uma URL ou endereço de e-mail",Preview:"Pré-visualização",Insert:"Inserir",Unlink:"Remover hiperlink"},pt:{Font:"Tipo de letra",Size:"Tamanho",Bold:"Negrito",Italic:"Itálico",Underline:"Sublinhado","Strike-Through":"Rasurado","Remove Format":"Remover formatação","Foreground Color":"Cor do tipo de letra","Background Color":"Realçar",Superscript:"Sobrescrito",Subscript:"Subscrito","Justify Left":"Alinhar à esquerda","Justify Center":"Centrar horizontalmente","Justify Right":"Alinhar à direita","Justify Full":"Justificado",Indent:"Aumentar avanço",Outdent:"Diminuir avanço","Ordered List":"Numeração","Unordered List":"Marcas","Horizontal Rule":"Linha horizontal","Insert Image":"Inserir imagem","Insert Link":"Inserir hiperligação",Undo:"Anular",Redo:"Refazer","Show Source":"Mostrar código-fonte","Size 1":"Tamanho 1","Size 2":"Tamanho 2","Size 3":"Tamanho 3","Size 4":"Tamanho 4","Size 5":"Tamanho 5","Size 6":"Tamanho 6","Size 7":"Tamanho 7","Input image URL":"Insira a URL da imagem","Input link URL or E-mail address":"Insira uma URL ou endereço de correio eletrónico",Preview:"Pré-visualização",Insert:"Inserir",Unlink:"Remover hiperligação"}},i=e();return function(e){return i[e]===r?e:i[e]}}(),i=function(){var e=/^[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~](\.?[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~])*@([\w\-]+\.)+(\w+)$/;return function(t){return!(t.length>256)&&(!(t.indexOf("@")>64)&&null!==t.match(e))}}(),o=function(){var e=/^https?:\/\//;return function(t){return null!==t.match(e)}}(),c=function(){var t=0,a=1,n=2,i="fontname",o="fontsize",c="bold",s="italic",l="underline",u="strikethrough",d="removeformat",f="forecolor",m="backcolor",p="hilitecolor",h="superscript",g="subscript",y="justifyleft",C="justifycenter",v="justifyright",M="justifyfull",S="indent",z="outdent",O="insertorderedlist",N="insertunorderedlist",R="inserthorizontalrule",b="insertimage",A="createlink",I="unlink",k="undo",T="redo";return function(w,D,L){function E(e){var t='<!DOCTYPE html><html><head><meta charset="UTF-8" /><style type="text/css">'+L+"</style></head><body></body></html>";G.designMode="on",J(t),j(e)}function U(e,t){e===m&&_(p)&&(e=p),W(),G.execCommand(e,!1,t)}function _(e){try{return G.queryCommandEnabled(e)}catch(e){return!1}}function F(e){return e===r?x():void j(e)}function x(){var e=G.body.innerHTML;return e=e.replace(/(<\/?)p\b/gi,"$1div").replace(/(<\/?)em\b/gi,"$1i").replace(/(<\/?)strong\b/gi,"$1b").replace(/(<\/?)del\b/gi,"$1s")}function j(e){G.body.innerHTML=e}function J(e){G.open(),G.write(e),G.close()}function P(){var d={fontname:null,fontsize:null,forecolor:null,backcolor:null,bold:t,italic:t,underline:t,strikethrough:t,superscript:t,subscript:t,justifyleft:t,justifycenter:t,justifyright:t,justifyfull:t,insertorderedlist:t,insertunorderedlist:t,createlink:t,unlink:t,undo:t,redo:t};""===H()&&(d[A]=n,d[I]=n),e.each([A,I,k,T],function(e,t){_(t)||(d[t]=n)});for(var p=B();null!==p;){if(p.tagName!==r){var S=p.tagName.toLowerCase();switch(S){case"b":case"strong":d[c]=a;break;case"i":case"em":d[s]=a;break;case"u":d[l]=a;break;case"s":case"strike":case"del":d[u]=a;break;case"sup":d[h]=a;break;case"sub":d[g]=a;break;case"ol":d[O]=a;break;case"ul":d[N]=a;break;case"font":p.face.length>0&&null===d[i]&&(d[i]=p.face),p.size.length>0&&null===d[o]&&(d[o]=p.size),p.color.length>0&&null===d[f]&&(d[f]=p.color)}}if(p.align!==r){var z=p.align.toLowerCase();switch(z){case"left":d[y]=a;break;case"center":d[C]=a;break;case"right":d[v]=a;break;case"justify":d[M]=a}}if(p.style!==r){var R=p.style;if(R.fontFamily!==r){var b=R.fontFamily;b.length>0&&null===d[i]&&(d[i]=b)}if(R.fontWeight!==r){var w=R.fontWeight.toLowerCase();switch(w){case"bold":case"bolder":d[c]=a}}if(R.fontStyle!==r){var D=R.fontStyle.toLowerCase();switch(D){case"italic":case"oblique":d[s]=a}}if(R.textDecoration!==r){var L=R.textDecoration.toLowerCase();L.indexOf("underline")!==-1&&(d[l]=a),L.indexOf("line-through")!==-1&&(d[u]=a)}if(R.color!==r){var E=R.color;E.length>0&&null===d[f]&&(d[f]=E)}if(R.backgroundColor!==r){var U=R.backgroundColor;U.length>0&&null===d[m]&&(d[m]=U)}if(R.verticalAlign!==r){var F=R.verticalAlign.toLowerCase();switch(F){case"super":d[h]=a;break;case"sub":d[g]=a}}if(R.textAlign!==r){var x=R.textAlign.toLowerCase();switch(x){case"left":d[y]=a;break;case"center":d[C]=a;break;case"right":d[v]=a;break;case"justify":d[M]=a}}}p=p.parentNode}return G.selection&&(Y=G.selection.createRange()),d}function B(){return q.getSelection?q.getSelection().anchorNode:G.selection.createRange().parentElement()}function H(){if(q.getSelection){var e=q.getSelection();return null===e||0===e.rangeCount?"":e.getRangeAt(0).toString()}return G.selection.createRange().text}function K(e,t){if(q.getSelection){var r=G.createTextNode(e),a=q.getSelection();a.deleteFromDocument(),a.getRangeAt(0).insertNode(r)}else G.selection.createRange().text=e;t?U(d):W()}function W(){q.focus(),null!==Y&&Y.select()}var q=w.contentWindow,G=q.document;w.contentDocument&&(G=w.contentDocument);var Y=null;this.STATUS_NORMAL=t,this.STATUS_ACTIVE=a,this.STATUS_DISABLED=n,this.COMMAND_FONTNAME=i,this.COMMAND_FONTSIZE=o,this.COMMAND_BOLD=c,this.COMMAND_ITALIC=s,this.COMMAND_UNDERLINE=l,this.COMMAND_STRIKETHROUGH=u,this.COMMAND_REMOVEFORMAT=d,this.COMMAND_FORECOLOR=f,this.COMMAND_BACKCOLOR=m,this.COMMAND_SUPERSCRIPT=h,this.COMMAND_SUBSCRIPT=g,this.COMMAND_JUSTIFYLEFT=y,this.COMMAND_JUSTIFYCENTER=C,this.COMMAND_JUSTIFYRIGHT=v,this.COMMAND_JUSTIFYFULL=M,this.COMMAND_INDENT=S,this.COMMAND_OUTDENT=z,this.COMMAND_ORDEREDLIST=O,this.COMMAND_UNORDEREDLIST=N,this.COMMAND_INSERTHORIZONTALRULE=R,this.COMMAND_INSERTIMAGE=b,this.COMMAND_CREATELINK=A,this.COMMAND_UNLINK=I,this.COMMAND_UNDO=k,this.COMMAND_REDO=T,this.contentWindow=q,this.contentDocument=G,this.getCurrentStatus=P,this.execCommand=U,this.canExecCommand=_,this.value=F,this.getSelectedText=H,this.insertText=K,this.setFocus=W,E(D)}}();return e.fn.extend({cazary:function(e){function s(t){"string"==typeof t&&(t=p[t]!==r?p[t]:[t]);var a=e("<div />").addClass("cazary-commands-wrapper");return e.each(t,function(){var t=e("<ul />").addClass("cazary-commands-list"),i=this.toLowerCase().split(" ");e.each(i,function(){var a=this.toString();if("|"===a&&(a="separator"),f[a]!==r){var i=n(f[a]),o="cazary-command-"+a,c=e("<li />").attr({unselectable:"on",title:i}).addClass(o).text(i);t.append(c)}}),a.append(t)}),a}function l(){e(".cazary-panel").each(function(){var t=e(this).data("command"),r=".cazary-command-"+t;e(r).removeClass("cazary-active")}).remove()}var u=27,d='<div class="cazary"><iframe class="cazary-edit" src="javascript:" style="display:none;"></iframe></div>',f={separator:"",fontname:"Font",fontsize:"Size",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strike-Through",removeformat:"Remove Format",forecolor:"Foreground Color",backcolor:"Background Color",superscript:"Superscript",subscript:"Subscript",justifyleft:"Justify Left",justifycenter:"Justify Center",justifyright:"Justify Right",justifyfull:"Justify Full",indent:"Indent",outdent:"Outdent",insertorderedlist:"Ordered List",insertunorderedlist:"Unordered List",inserthorizontalrule:"Horizontal Rule",insertimage:"Insert Image",createlink:"Insert Link",unlink:"Unlink",undo:"Undo",redo:"Redo",source:"Show Source"},m={1:"Size 1",2:"Size 2",3:"Size 3",4:"Size 4",5:"Size 5",6:"Size 6",7:"Size 7"},p={MINIMAL:["bold italic underline strikethrough removeformat"],STANDARD:["fontname fontsize","bold italic underline strikethrough removeformat | forecolor backcolor | superscript subscript","source"],FULL:["fontname fontsize","bold italic underline strikethrough removeformat | forecolor backcolor | superscript subscript","justifyleft justifycenter justifyright justifyfull | indent outdent | insertorderedlist insertunorderedlist","inserthorizontalrule insertimage createlink unlink","undo redo","source"]};return e(function(e){e(a).on("click",function(){l()}).on("keydown",function(e){e.keyCode===u&&l()})}),function(f){return f=e.extend({mode:"rte",style:"body{margin:0px;padding:8px;}p{margin:0px;padding:0px;}",fontnames:["sans-serif","serif","cursive","fantasy","monospace","Arial","Arial Black","Comic Sans MS","Courier New","Narrow","Garamond","Georgia","Impact","Tahoma","Times New Roman","Trebuchet MS","Verdana"],colors:[["#ffffff","#ffcccc","#ffcc99","#ffff99","#ffffcc","#99ff99","#99ffff","#ccffff","#ccccff","#ffccff"],["#cccccc","#ff6666","#ff9966","#ffff66","#ffff33","#66ff99","#33ffff","#66ffff","#9999ff","#ff99ff"],["#bbbbbb","#ff0000","#ff9900","#ffcc66","#ffff00","#33ff33","#66cccc","#33ccff","#6666cc","#cc66cc"],["#999999","#cc0000","#ff6600","#ffcc33","#ffcc00","#33cc00","#00cccc","#3366ff","#6633ff","#cc33cc"],["#666666","#990000","#cc6600","#cc9933","#999900","#009900","#339999","#3333ff","#6600cc","#993399"],["#333333","#660000","#993300","#996633","#666600","#006600","#336666","#000099","#333399","#663366"],["#000000","#330000","#663300","#663333","#333300","#003300","#003333","#000066","#330099","#330033"]],commands:"STANDARD"},f),this.each(function(){function p(e,t){l(),_.execCommand(e,t),R()}function h(){k.hide(),w.css("display",""),L.removeClass("cazary-disabled"),D.removeClass("cazary-active"),R()}function g(){var e=_.value();k.val(e),w.hide(),k.css("display",""),L.addClass("cazary-disabled"),D.addClass("cazary-active")}function y(){C()?h():g()}function C(){return D.hasClass("cazary-active")}function v(t,r,n){var i=e(".cazary-panel");if(i.length>0){var o=i.data("id"),c=i.data("command");if(l(),c===t&&o===I)return void b()}var s=!1;switch(t){case _.COMMAND_FONTNAME:i=M(t,r.fontnames),s=!0;break;case _.COMMAND_FONTSIZE:i=S(t),s=!0;break;case _.COMMAND_FORECOLOR:case _.COMMAND_BACKCOLOR:i=z(t,r.colors),s=!0;break;case _.COMMAND_INSERTIMAGE:i=O(t);break;case _.COMMAND_CREATELINK:i=N(t);break;default:return null}s&&i.on("click","li",function(){var r=e(this),a=r.data("param");p(t,a)});var u=n.addClass("cazary-active").offset();return u.top+=n.outerHeight(),i.addClass("cazary-panel").addClass("cazary-panel-"+t).data("id",I).data("command",t).css({left:u.left+"px",top:u.top+"px"}).on("click",function(){return!1}).appendTo(e(a.body)).find(":text:first").trigger("focus"),i}function M(t,r){var a=e("<ul />").addClass("cazary-widget-select");return e.each(r,function(){var t=this.toString(),r=e("<li />").attr({unselectable:"on",title:t}).css({"font-family":t}).data("param",t).text(t);a.append(r)}),e("<div>").append(a)}function S(t){var r=e("<ul />").addClass("cazary-widget-select");return e.each(m,function(t,a){var i=n(a),o=e("<li />").attr({unselectable:"on",title:i}).data("param",t),c=e("<font />").attr({size:t}).text(a);r.append(o.append(c))}),e("<div>").append(r)}function z(t,r){var a=e("<div>");return e.each(r,function(){var t=e("<ul />").addClass("cazary-widget-select-color");e.each(this,function(){var r=this.toString(),a=e("<li />").attr({unselectable:"on",title:r}).css({"background-color":r}).data("param",r).text(r);t.append(a)}),a.append(t)}),a}function O(r){function a(){var e=c.find(".cazary-widget-insertimage-url"),t=e.val();return o(t)?(p(r,t),!1):(e.trigger("focus"),!1)}function i(){var r=e(this);t.setTimeout(function(){var e="url_old",t=r.val(),a=r.data(e);if(t!==a){r.data(e,t);var n=c.find(".cazary-widget-preview");o(t)?(n.show(),c.find(".cazary-widget-preview-insertimage").attr("src",t)):n.hide()}},10)}var c=e("<div>").append(e("<form />").attr("action","#").append(e("<div />").append(e("<fieldset />").append(e("<legend />").text(n("Input image URL"))).append(e('<input type="text" />').addClass("cazary-widget-insertimage-url").attr({required:"required",placeholder:n("http://example.com/path/to/image.jpg")}))).append(e('<input type="submit" />').addClass("cazary-widget-submit").val(n("Insert")))).append(e("<fieldset />").addClass("cazary-widget-preview").append(e("<legend />").text(n("Preview"))).append(e("<img />").addClass("cazary-widget-preview-insertimage"))));return c.on("submit","form",a).on("click",".cazary-widget-submit",a).on("keydown paste",".cazary-widget-insertimage-url",i)}function N(r){function a(){var e=s.find(".cazary-widget-createlink-url"),t=e.val();if(i(t))t="mailto:"+t;else if(!o(t))return e.trigger("focus"),!1;return p(r,t),!1}function c(){var r=e(this);t.setTimeout(function(){var e="url_old",t=r.val(),a=r.data(e);if(t!==a){r.data(e,t);var n=s.find(".cazary-widget-preview");o(t)?(n.show(),s.find(".cazary-widget-preview-createlink").attr("src",t)):n.hide()}},10)}var s=e("<div>").append(e("<form />").attr("action","#").append(e("<div />").append(e("<fieldset />").append(e("<legend />").text(n("Input link URL or E-mail address"))).append(e('<input type="text" />').addClass("cazary-widget-createlink-url").attr({required:"required",placeholder:n("http://example.com/, someone@example.com")}))).append(e('<input type="button" />').addClass("cazary-widget-submit").val(n("Insert")))).append(e("<fieldset />").addClass("cazary-widget-preview").append(e("<legend />").text(n("Preview"))).append(e("<iframe />").addClass("cazary-widget-preview-createlink"))));return s.on("submit","form",a).on("click",".cazary-widget-submit",a).on("keydown paste",".cazary-widget-createlink-url",c)}function R(){var e=_.getCurrentStatus();for(var t in e){var r=e[t],a=T.find(".cazary-command-"+t);if(t!==_.COMMAND_FONTNAME)if(t!==_.COMMAND_FONTSIZE)if(t!==_.COMMAND_FORECOLOR&&t!==_.COMMAND_BACKCOLOR)r===_.STATUS_ACTIVE?a.addClass("cazary-active"):a.removeClass("cazary-active"),r===_.STATUS_DISABLED?a.addClass("cazary-disabled"):a.removeClass("cazary-disabled");else{var i=T.find(".cazary-command-"+t),o=null===r?"":r;i.css("background-color",o)}else{var c=r;null===c?(r="",c=a.attr("title")):c=n(m[c]),a.text(c)}else{var s=r;null===s&&(r="",s=a.attr("title")),a.css({"font-family":r}).text(s)}}}function b(){C()?k.trigger("focus"):_.setFocus()}function A(){var t=e(_.contentDocument.body);0===t.text().length?t.addClass("empty"):t.removeClass("empty")}var I=parseInt(1e4*Math.random()),k=e(this),T=e(d).css({width:k.width()});T.prepend(s(f.commands));var w=T.find(".cazary-edit").css({height:k.height()}),D=T.find("ul.cazary-commands-list li.cazary-command-source"),L=T.find("ul.cazary-commands-list li:not(.cazary-command-source)");k.hide().before(T).insertAfter(w).addClass("cazary-source");var E=f.style,U=k.attr("placeholder");U!==r&&(U=U.replace("'","\\'"),E+="body.empty:before{position:fixed;color:#888;content:'"+U+"';}");var _=new c(w.get(0),k.val(),E),F=[_.COMMAND_BOLD,_.COMMAND_ITALIC,_.COMMAND_UNDERLINE,_.COMMAND_STRIKETHROUGH,_.COMMAND_REMOVEFORMAT,_.COMMAND_SUPERSCRIPT,_.COMMAND_SUBSCRIPT,_.COMMAND_JUSTIFYLEFT,_.COMMAND_JUSTIFYCENTER,_.COMMAND_JUSTIFYRIGHT,_.COMMAND_JUSTIFYFULL,_.COMMAND_INDENT,_.COMMAND_OUTDENT,_.COMMAND_ORDEREDLIST,_.COMMAND_UNORDEREDLIST,_.COMMAND_INSERTHORIZONTALRULE,_.COMMAND_UNLINK,_.COMMAND_UNDO,_.COMMAND_REDO],x=[_.COMMAND_FONTNAME,_.COMMAND_FONTSIZE,_.COMMAND_FORECOLOR,_.COMMAND_BACKCOLOR,_.COMMAND_INSERTIMAGE,_.COMMAND_CREATELINK];"html"===f.mode?g():h(),k.on("change",function(){var t=e(this).val();_.value(t),A()}),e(_.contentDocument).on("select",function(){R()}).on("mouseup",function(){l(),R()}).on("keydown",function(e){e.keyCode===u&&l()}).on("keyup paste",function(){t.setTimeout(function(){R(),A()},10)}),e(_.contentWindow).on("focus",function(){l(),R()}).on("blur",function(){k.val(_.value())}),T.on("click","ul.cazary-commands-list li",function(t){var r=e(this);r.hasClass("cazary-disabled")&&(t.stopImmediatePropagation(),b())}),D.on("click",function(){y(),b()}),e.each(F,function(){var e=this.toLowerCase();T.on("click",".cazary-command-"+e,function(){p(e)})}),e.each(x,function(){var t=this.toLowerCase();T.on("click",".cazary-command-"+t,function(){var r=e(this);return v(t,f,r),!1})})})}}(e)}),e});